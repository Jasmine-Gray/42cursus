IPアドレスにおける「ネットワーク」と「サブネットマスク」は、インターネット上の住所を「町名（ネットワーク部）」と「番地（ホスト部）」に切り分けるための仕組みです。

---

### 1. ネットワークとホスト：住所の例え

IPアドレス（例：`192.168.1.10`）は、一つの数字の羅列ではなく、内部で2つの役割に分かれています。

* **ネットワーク部（町名）**: そのデバイスが所属しているグループ（ネットワーク）を指します。同じネットワーク内にいるデバイス同士は、ルーターを介さずに直接通信できます。
* **ホスト部（番地）**: そのネットワーク内での「個別のデバイス」を識別するための番号です。

### 2. サブネットマスク：境界線を描くツール

サブネットマスクは、IPアドレスの**どこまでが「ネットワーク部」で、どこからが「ホスト部」か**を指定するためのフィルターです 。

#### 具体的な仕組み（255.255.255.0 の場合）

サブネットマスクで `255` となっている部分は「ここはネットワーク部（変更不可の共通部分）」であることを示し、`0` となっている部分は「ここはホスト部（自由に割り当て可能）」であることを示します。

* **IPアドレス**: `192 . 168 . 1 . 10`
* **マスク**: `255 . 255 . 255 . 0`
* **結果**:
* ネットワーク部：`192.168.1`
* ホスト部：`10`



この設定では、`192.168.1.1` から `192.168.1.254` までのデバイスが同じグループ（町内）にいることになり、お互いに直接通信が可能です。

### 3. なぜサブネットマスクが必要なのか？

コンピュータは、通信相手が「自分と同じ町内（ネットワーク）」にいるのか、「外の世界（別のネットワーク）」にいるのかを判断するためにサブネットマスクを使います。

* **同じ町内の場合**: 直接パケットを届けます。
* 
**別の町の場合**: 「デフォルトゲートウェイ（ルーター）」にパケットを渡し、外に運んでもらいます 。



### 4. CIDR表記（スラッシュ表記）

NetPracticeの画面（例：`0.0.0.0/0`）などで、`/24` や `/16` という表記を見かけることがあります 。これはサブネットマスクの別の書き方です。

* **`/24`**: 左から24ビット（つまり 255.255.255.0）がネットワーク部。
* **`/16`**: 左から16ビット（つまり 255.255.0.0）がネットワーク部。
* **`/8`**: 左から8ビット（つまり 255.0.0.0）がネットワーク部。

---
ホスト部は、ネットワーク内において**「特定の1台のデバイス」を特定する**ための識別番号としての役割を持っています。

IPアドレス全体を住所に例えると、ネットワーク部が「町名」なら、ホスト部は「番地」や「部屋番号」に相当します。

### ホスト部の主な意味と役割

* **個別の識別**: 同じネットワーク（同じサブネットマスクの範囲内）に接続されている複数のデバイス（PC、スマートフォン、プリンター、ルーターの各インターフェースなど）を区別するために使われます。
* **通信の宛先指定**: データが目的のネットワーク（町）に届いた後、最終的にどのデバイス（家）に届けるべきかを決定する際に参照されます。
* **設定の自由度**: サブネットマスクによってホスト部として割り当てられた範囲内であれば、管理者は自由に各デバイスに番号を割り振ることができます。

---

### NetPracticeでの実用的な考え方

課題を解く上で、ホスト部に関して以下の2つの「やってはいけないこと」を覚えているとスムーズです。

1. **重複の禁止**: 同じネットワーク内で、2つのデバイスに同じホスト番号（同じIPアドレス）を割り当てることはできません。
* *例*: Host Bが `104.97.23.12` なら、Host Aは `104.97.23.12` 以外の番号（例：`.1`）にする必要があります。


2. **特別な番号の回避**: すべてのビットが `0`（ネットワークアドレス）またはすべてが `1`（ブロードキャストアドレス、10進数で `255`）になる番号は、個別のホストには通常割り当てられません。

### 構成要素のまとめ

NetPracticeの資料でも、これらを正しく構成することがネットワークを機能させる鍵であると述べられています 。

| 項目 | 内容 | 役割 |
| --- | --- | --- |
| **IPアドレス** | 例: `192.168.1.10` | ネットワーク上の住所全体 

 |
| **サブネットマスク** | 例: `255.255.255.0` | ネットワーク部とホスト部の境界線 

 |
| **ホスト部** | 例: `.10` | ネットワーク内の特定の1台を指す番号 



1. 使ってはいけない「2つの特別な数字」
1つのセクション（8ビット）が 0 から 255 まである中で、ホスト部として設定できない数字が2つあります。

「0」 (ネットワークアドレス): そのネットワーク全体を代表する名前として予約されているため、個別のPCには割り当てられません。

「255」 (ブロードキャストアドレス): そのネットワークにいる全員に一斉送信するための番号として予約されているため、個別のPCには割り当てられません。

したがって、自由に使えるのは 1から254まで です。

2. ホスト部を決めるときの3つのルール
NetPracticeで設定を行う際は、以下の点に注意してください 。


重複禁止: 同じネットワーク内で、すでに他のデバイス（Host Bなど）が使っている数字は使えません 。


ネットワーク部との組み合わせ: サブネットマスクが 255.255.255.0 なら、最初の3つの数字（ネットワーク部）を相手と完全に一致させた上で、最後の数字（ホスト部）だけを自分専用の数字に変えます 。


ルーター（ゲートウェイ）との整合性: 後のレベルで登場しますが、ルーターのインターフェースもそのネットワーク内の「1つのホスト」として数値を持ちます 。


### IPアドレス（IPv4）において、各数値が「0〜255」の範囲の理由

コンピュータがネットワーク上でデータをやり取りする際のデータサイズの規格に由来。

1. コンピュータはすべての情報を「0」と「1」の組み合わせである2進数で処理します。 1ビット (bit): 0か1、どちらか1つの情報を保持できる最小単位です。1オクテット (octet): IPアドレスの「.」で区切られた1つのセクションは、8ビットで構成されています。8つのスイッチがすべて「オン（1）」になった状態、つまり $11111111_2$ を10進数に変換すると、以下の計算になります：$$128 + 64 + 32 + 16 + 8 + 4 + 2 + 1 = 255$$したがって、1つのセクション（1オクテット）で表現できる数字は、$00000000_2$（0）から $11111111_2$（255）までの256種類に限られるのです。 

2. IPアドレスの全体像IPv4アドレスは、この8ビットのセクションが4つ集まってできています。IPアドレスの構造[ 8bit ] . [ 8bit ] . [ 8bit ] . [ 8bit ] = 合計 32bitあなたが入力した 278 という数字は、2進数に直すと $100010110_2$ となり、9ビット必要になります。しかし、IPアドレスの規格では1セクションに8ビット分しかスペースがないため、「入り切らない（無効）」と判定され、ログに invalid IP address と表示されたのです。 

3. 特別な意味を持つ数字（0と255）0〜255の中でも、特に重要な役割を持つ数字があります。ネットワークアドレス (一番最初の数字):そのネットワーク自体を指す番号。通常、デバイスの個別のIPとして割り当てることはできません。ブロードキャストアドレス (一番最後の数字):そのネットワーク内の「全員」にデータを送るための専用番号。これも個別のデバイスには使いません。そのため、実用的な設定では、その間の数字（例：104.97.23.1 〜 104.97.23.254）を各PCに割り当てることになります。