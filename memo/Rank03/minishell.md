## shell builtin command

### builtinとは

**ビルトイン**は、シェル（bash、zsh、fishなど）が内部で持っているコマンドや機能のことです。

### 通常のコマンドとの違い

| 項目 | 通常のコマンド | ビルトインコマンド |
|------|----------------|-------------------|
| 場所 | ファイルシステム上に存在 | シェル自体に組み込まれている |
| 実行速度 | やや遅い | 高速 |
| 機能 | 汎用的な処理 | シェルの動作や設定を直接制御 |

### ビルトインコマンドの利点

- **実行が高速** - 外部プログラムを呼び出す必要がない
- **シェルの状態を直接操作** - 環境変数、作業ディレクトリなどを変更可能
- **常に利用可能** - 外部コマンドが削除されても影響を受けない

### `builtin` コマンド

`builtin` コマンドは、シェル内で定義されているビルトインコマンドを明示的に実行するためのコマンドです。

### 基本的な使い方

```bash
builtin <コマンド名> [引数...]
```

### 使用例

```bash
# cdコマンドをビルトインとして明示的に実行
builtin cd /home/user

# echoコマンドをビルトインとして実行
builtin echo "Hello, World!"

# testコマンドをビルトインとして実行
builtin test -f filename.txt
```

### `builtin` コマンドが必要な場面

1. **同名の外部コマンドが存在する場合**
   ```bash
   # 外部のechoコマンドではなく、シェルのビルトインechoを使用
   builtin echo "message"
   ```

2. **関数やエイリアスと同名のビルトインコマンドを使用する場合**
   ```bash
   # cdという名前の関数が定義されていても、ビルトインcdを実行
   builtin cd /tmp
   ```
### ビルトインコマンドの確認方法

#### コマンドがビルトインかどうか確認

```bash
# typeコマンドで確認
type cd
# 出力: cd is a shell builtin

type ls
# 出力: ls is aliased to `ls --color=auto'
```

#### 利用可能なビルトインコマンド一覧

```bash
# bashの場合
help

# zshの場合
man zshbuiltins
```


### 📂 pwd `getcwd` 

| 🏷️ 項目      | 📘 内容         |
|---------------|------------------------------------------------------------------------|
| **ヘッダ**     | ```#include <unistd.h>```                                         |
| **書式**       | ```char *getcwd(char *buf, size_t length);```                    |
| **引数**       | - `char *buf`：カレントディレクトリ名を保存する領域のポインタ<br>- `size_t length`：バイト数（bufのサイズ） |
| **戻り値**     | - ✅ **成功時**：カレントディレクトリの絶対パスを格納したポインタ<br>- ❌ **失敗時**：`NULL` |
| **解説**       | `getcwd` は、現在の作業ディレクトリの絶対パスを取得し、<br>`buf` に格納します。`length` は格納可能な最大サイズです。 |

> 💡 **ヒント**：`buf` に `NULL` を渡すと、必要な領域が自動で確保されます（POSIX/GNU拡張）。<br>
> NULL & 0 を渡すと malloc される（GNU拡張）<br>
>getcwdに入っている値はmallocで割り当てられたものなのでfreeが必要。



### 📂 `echo` 

### 概要
`echo` コマンドは引数として与えられた文字列を標準出力に表示します。

### サポートするオプション
- `-n`: 改行文字を出力しない

### 実行例とエラーハンドリング

#### 基本的な使用法
```bash
echo hello
# 出力: hello（改行あり）

echo -n hello
# 出力: hello（改行なし）
```

### 複数の `-n` オプション
```bash
echo -nnnn hello
# 出力: hello（改行なし）
# 注意: -n が複数回指定されても動作は同じ
```

### 環境変数の展開
```bash
echo $HOME
# 出力: /home/username（環境変数HOMEの値）

echo "$nothing" "" aaa
echo $nothing "" aaa
```

### 無効なオプション
```bash
echo その他のオプション 標準入力
# 出力: その他のオプション 標準入力
# 注意: -n 以外のオプションは文字列として扱われる

echo オプション扱いにならず全て標準出力
# 出力: オプション扱いにならず全て標準出力
```

## 重要な注意点


1. **オプション**: `-n` のみサポート。その他は全て引数として扱う
2. **改行**: デフォルトで改行文字が末尾に追加される（`-n` オプション使用時を除く）
3. **環境変数**: `$VAR` 形式の環境変数は展開される
4. **空文字**: `""` や未定義変数は空文字として処理される
5. **エスケープシーケンス**: `\n` などは文字通りに出力される（解釈されない）

### `env`
getenv
environ